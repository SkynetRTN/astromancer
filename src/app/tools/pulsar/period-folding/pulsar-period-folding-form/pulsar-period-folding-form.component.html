<form [formGroup]="formGroup" class="pulsar-form-horizontal">
  <div class="row">
    <div class="col-12">
      <mat-form-field>
        <mat-label>Title</mat-label>
        <input [formControlName]="'chartTitle'" matInput>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-4">
      <mat-form-field>
        <mat-label>X Axis</mat-label>
        <input [formControlName]="'xAxisLabel'" matInput>
      </mat-form-field>
    </div>
    <div class="col-4">
      <mat-form-field>
        <mat-label>Y Axis</mat-label>
        <input [formControlName]="'yAxisLabel'" matInput>
      </mat-form-field>
    </div>
    <div class="col-4">
      <mat-form-field>
        <mat-label i18n>Period Shown</mat-label>
        <mat-select [formControlName]="'displayPeriod'">
          <mat-option *ngFor="let period of displayPeriods" [value]="period">
            {{period}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <ng-container *ngIf="calFile; else fixedSlider">
        <my-input-slider (value)="onChange($event)" [defaultValue]="periodMax"
                        [inputPrecision]="5"
                        [isLog]="false" [label]="'Period (sec)'"
                        [maxValue]="periodMax" [minValue]="periodMin" [name]="'period'"
                        [stepValue]="(periodMax-periodMin) / 1000" [step]="(periodMax-periodMin) / 1000" [value$]="periodSubject">
        </my-input-slider>
      </ng-container>
      <ng-template #fixedSlider>
        <my-input-slider (value)="onChange($event)" [defaultValue]="periodMax"
                        [inputPrecision]="5" [label]="'Period (sec)'"
                        [maxValue]="periodMax" [minValue]="periodMax" [name]="'period'"
                        [stepValue]="0" [step]="0" [value$]="periodSubject">
        </my-input-slider>        
      </ng-template>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <my-input-slider (value)="onChange($event)" [defaultValue]="0"
                       [label]="'Phase (cycles)'" [maxValue]="1"
                       [minValue]="0"
                       [name]="'phase'" [value$]="phaseSubject">
      </my-input-slider>
    </div>
  </div>
  <div class="row">
    <ng-container *ngIf="calFile; else speedSlider">
      <div class="col-4">
        <mat-form-field>
          <mat-label>Calibration</mat-label>
          <input matInput [formControlName]="'cal'" type="number" step="0.01" min="0.5" max="2">
        </mat-form-field>
      </div>
      <div class="col-4">
        <mat-form-field>
          <mat-label>Speed</mat-label>
          <input matInput [formControlName]="'speed'" type="number" step="0.01" min="0.01" max="5">
        </mat-form-field>
      </div>    
      <div class="col-4">
        <mat-form-field>
          <mat-label>Bins</mat-label>
          <input matInput [formControlName]="'bins'" type="number" step="10" min="10" max="1000">
        </mat-form-field>
      </div>      
    </ng-container>
    <ng-template #speedSlider>
      <div class="col-12">
        <my-input-slider (value)="onChange($event)"
                        [defaultValue]="1"
                        [label]="'Speed'"
                        [maxValue]="2"
                        [minValue]="0.01"
                        [name]="'speed'"
                        [value$]="speedSubject">
        </my-input-slider>
      </div>
    </ng-template>
  </div>
  <div class="row" style="padding-bottom: 5%;">
    <div class="col-6">
      <button (click)="sonificationBrowser()" mat-raised-button style="width: 100%;">
        {{ isPlaying ? 'Stop' : 'Sonify' }}
      </button>
    </div>
    <div class="col-6">
      <button (click)="sonification()" mat-raised-button style="white-space: nowrap; width: 100%;">Save Sonify</button>
    </div>
  </div>
  <div class="row" style="padding-bottom: 5%;">
    <div class="col-6">
      <button (click)="saveGraph()" mat-raised-button style="width: 100%;">Save Graph</button>
    </div>
    <div class="col-6">
      <button mat-raised-button color="warn" (click)="resetPulsar()" style="width: 100%;">
        Reset Data
      </button>
    </div>
  </div>
</form>
<form [formGroup]="formGroup" class="pulsar-form-vertical">
  <div class="row">
    <div class="col-6">
      <mat-form-field>
        <mat-label>Title</mat-label>
        <input [formControlName]="'chartTitle'" matInput>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-4">
      <mat-form-field>
        <mat-label>X Axis</mat-label>
        <input [formControlName]="'xAxisLabel'" matInput>
      </mat-form-field>
    </div>
    <div class="col-4">
      <mat-form-field>
        <mat-label>Y Axis</mat-label>
        <input [formControlName]="'yAxisLabel'" matInput>
      </mat-form-field>
    </div>
    <div class="col-4">
      <mat-form-field>
        <mat-label i18n>Period Shown</mat-label>
        <mat-select [formControlName]="'displayPeriod'">
          <mat-option *ngFor="let period of displayPeriods" [value]="period">
            {{period}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-6">
      <ng-container *ngIf="calFile; else fixedSlider">
        <my-input-slider (value)="onChange($event)" [defaultValue]="periodMax"
                         [inputPrecision]="5"
                         [isLog]="false" [label]="'Period (sec)'"
                         [maxValue]="periodMax" [minValue]="periodMin"
                         [name]="'period'"
                         [stepValue]="(periodMax-periodMin) / 1000" [step]="(periodMax-periodMin) / 1000" [value$]="periodSubject">
        </my-input-slider>
      </ng-container>
      <ng-template #fixedSlider>
        <my-input-slider (value)="onChange($event)" [defaultValue]="periodMax"
                         [inputPrecision]="5"
                         [isLog]="false" [label]="'Period (sec)'"
                         [maxValue]="periodMax" [minValue]="periodMax"
                         [name]="'period'"
                         [stepValue]="0" [step]="0" [value$]="periodSubject">
        </my-input-slider>
      </ng-template>
    </div>
    <div class="col-6">
      <my-input-slider (value)="onChange($event)" [defaultValue]="0"
                       [label]="'Phase (cycles)'" [maxValue]="1"
                       [minValue]="0"
                       [name]="'phase'" [value$]="phaseSubject">
      </my-input-slider>
    </div>
  </div>
  <div class="row">
    <div class="col-12" *ngIf="!calFile">
      <my-input-slider (value)="onChange($event)"
                       [defaultValue]="1"
                       [label]="'Speed'"
                       [maxValue]="2"
                       [minValue]="0.01"
                       [name]="'speed'"
                       [value$]="speedSubject">
      </my-input-slider>
    </div>
    <ng-container *ngIf="calFile">
      <div class="col-4">
        <my-input-slider (value)="onChange($event)"
                         [defaultValue]="1"
                         [label]="'Calibration'"
                         [maxValue]="2"
                         [minValue]="0.5"
                         [name]="'calibration'"
                         [value$]="calSubject">
        </my-input-slider>
      </div>
      <div class="col-4">
        <my-input-slider (value)="onChange($event)"
                         [defaultValue]="1"
                         [label]="'Speed'"
                         [maxValue]="2"
                         [minValue]="0.01"
                         [name]="'speed'"
                         [value$]="speedSubject">
        </my-input-slider>
      </div>
      <div class="col-4">
        <my-input-slider (value)="onChange($event)"
                         [defaultValue]="100"
                         [label]="'Bins'"
                         [maxValue]="1000"
                         [minValue]="10"
                         [name]="'speed'"
                         [value$]="binsSubject">
        </my-input-slider>
      </div>
    </ng-container>
  </div>
  <div class="row" style="padding-bottom: 2%;">
    <div class="col-6">
      <button (click)="sonificationBrowser()" mat-raised-button style="width: 100%;">
        {{ isPlaying ? 'Stop' : 'Sonify' }}
      </button>
    </div>
    <div class="col-6">
      <button (click)="sonification()" mat-raised-button style="white-space: nowrap; width: 100%;">Save Sonify</button>
    </div>
  </div>
  <div class="row" style="padding-bottom: 2%;">
    <div class="col-6">
      <button (click)="saveGraph()" mat-raised-button style="width: 100%;">Save Graph</button>
    </div>
    <div class="col-6">
      <button mat-raised-button color="warn" (click)="resetPulsar()" style="width: 100%;">
        Reset Data
      </button>
    </div>
  </div>
</form>
